# 関数（詳細）

## 関数の実体

関数とは、タプルを入力とし、値を返すオブジェクトをさします。関数も変数と同様にオブジェクトなので、関数そのものを代入したり、それを利用して関数を呼び出したりすることもできます。

```Julia
julia> f = add
add (generic function with 1 method)

julia> f(5,7)
12
```

## 引数

<!--
引数が mutable（可変）か immutable（不変）かによって

共有渡しは、関数呼び出し時に値は関数へコピーされず、値が格納されている場所のようなもの（bindings）が渡されます。

配列のように mutable（可変）なオブジェクトを引数として渡す場合、関数内における変更は関数の呼び出し元にも反映されます。このようなオブジェクトに対する振る舞いは、C/C++言語におけるポインタ渡しと類似していますが、Julia にはポインタという概念はありません。
-->


<!--
- 型指定
- 無形タプル・名前付きタプル
- varargs
- optional args
- keyword args
-->


## return


## 無名関数

名前のない関数、いわゆる無名関数（anonymous function）を定義することもできます。

```Julia
julia> x -> x - 273.15
#1 (generic function with 1 method)

julia> (x, y) -> x + 2y - 1
#3 (generic function with 1 method)
```

この例のように、引数が1個しかない場合は左辺の括弧を省略できます。ちなみに #1 は、コンパイラが内部的につけている関数名です。

無名関数は、```function``` 文において関数名を省略することでも定義できます。

```Julia
julia> function (x)
           x - 273.15
       end
#1 (generic function with 1 method)
```

無名関数の利用場面としては、関数への引数として関数を渡す状況（コールバック）が考えられます。コールバックによって関数の汎用性が高まるとともに、無名関数を指定することで名前の無用な重複を気にする必要がなくなります。

```Julia
julia> function calc4( f, v )
           f(v)^4
       end
       calc2(x -> x + 273.15, 10)
80173.92249999999
```

もう少し実用的な例としては、```map()``` 関数における活用例があります。```map()``` は関数と引数配列を与えると、戻り値を配列で返す関数です。

```Julia
julia> map( x -> x + 273.15, [10.0, 15.5, 22.3] )
3-element Vector{Float64}:
 283.15
 288.65
 295.45
```
